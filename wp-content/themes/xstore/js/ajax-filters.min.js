var ajaxFilters;!function(v){"use strict";var x;ajaxFilters={init:function(){x={in_progress:!1,categories:!1},"undefined"!=typeof EthemeApplyFilters&&EthemeApplyFilters.is_loaded||this.ajaxFilters()},ajaxFilters:function(){if(etAjaxFiltersConfig.woocommerceSettings.ajax_filters){let e=".content-page .etheme-ajax-filter, .content-page .etheme_swatches_filter ul li a, .content-page .woocommerce-widget-layered-nav ul li a, .content-page .widget_rating_filter ul li a, .content-page .widget_layered_nav_filters ul li a";function t(e){let t="";if(e.hasClass("dropdown_product_brand")||e.hasClass("dropdown_product_cats")){if(!(t=e.find("option:selected").data("url")))return}else t=e.attr("href");var a,r=e.parents(".etheme_widget_brands_filter"),e=e.parents(".etheme_widget_cats_filter");r.hasClass("on_brand")||e.hasClass("on_cat")?(a="",r.hasClass("on_brand")&&(a=r.attr("data-shop-url")),a=function(a,e){let r=function(e){var t={},a=document.createElement("a"),e=(a.href=e,a.search.substring(1)),r=e.split("&");for(let e=0;e<r.length;e++){var i=r[e].split("=");t[i[0]]=decodeURIComponent(i[1])}return t}(e),i=0;return a+="?",v.each(r,function(e,t){i++,a=Object.keys(r).length>i?a+e+"="+t+"&":a+e+"="+t}),a}(a=e.hasClass("on_cat")?e.attr("data-shop-url"):a,t),ajaxFilters.load_data(a)):ajaxFilters.load_data(t)}etAjaxFiltersConfig.ajax_categories&&(e+=", .content-page .widget_product_categories ul li a"),v(document).on("click",e,function(a){if(a.preventDefault(),!x.in_progress){let e=v(this).attr("href"),t=window.location.href;v(this).parents(".sidebar-widget").hasClass("widget_product_categories")&&(x.categories=!0),v(this).hasClass("remove-brand")||v(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")||1<t.indexOf("filter_brand")&&(a=new URL(t).searchParams.get("filter_brand"),e=e.replace("?","?filter_brand="+a+"&")),ajaxFilters.load_data(e)}}),v(document).on("change",".content-page .dropdown_product_brand, .content-page .dropdown_product_cats",function(e){e.preventDefault(),t(v(this))}),v(document).on("click",".content-page .etheme_widget_brands_filter ul li a, .content-page .etheme_widget_cats_filter ul li a",function(e){e.preventDefault(),t(v(this))}),v(document).on("click",".content-page .et-reset-price",function(e){var t,a,r,i;e.preventDefault(),x.in_progress||(i=(e=v(this).parents(".etheme-price-filter form")).find("#min_price"),t=e.find("#max_price"),a=e.find("#min_price").data("min"),r=e.find("#max_price").data("max"),i.val(a),t.val(r),v(document.body).trigger("price_slider_slide",[a,r]),v.each(v(".etheme-price-filter .ui-slider-handle"),function(e,t){n(v(t),!(1!=e),!0)}),n(v(".etheme-price-filter .ui-slider-range"),!1,!1),i=e.attr("action")+"?"+e.find("input").not("#min_price, #max_price").serialize(),ajaxFilters.load_data(i))}),v(document).on("price_slider_change",function(){var e;v(".et-reset-price").removeClass("hidden"),x.in_progress||!(e=v(this).find(".etheme-price-filter form").first())||e.length<1||(e=e.attr("action")+"?"+e.serialize(),ajaxFilters.load_data(e))}),v(document).on("click",'.content-page .widget_price_filter .button:not(".et-reset-price")',function(e){e.preventDefault(),x.in_progress||(e=(e=v(this).closest("form")).attr("action")+"?"+e.serialize(),ajaxFilters.load_data(e))}),v(document).on("change",".content-page select.woocommerce-widget-layered-nav-dropdown",function(n){if(n.preventDefault(),!x.in_progress){let e=v(this),t=window.location.href,a=e.attr("class"),r="",i="";a=a.split(" "),v.each(a,function(e,t){t.includes("dropdown_layered_nav_")&&(r=t.replace("dropdown_layered_nav_",""))}),r="filter_"+r,(i=t.includes(r)?(n=e.parents("form").find("input[name="+r+"]").attr("value"),t.replace(r+"="+n,r+"="+e.val())):t.includes("?")?t.replace("?","?"+r+"="+e.val()+"&"):t+"?"+r+"="+e.val())&&ajaxFilters.load_data(i)}}),v(document).on("submit",".content-page .woocommerce-ordering",function(e){if(e.preventDefault(),!x.in_progress){let e=v(this),t=e.serializeArray(),a=new URL(window.location.href),r=new URLSearchParams(a.search),i,n;v.each(t,function(e,t){"orderby"==t.name&&(n=t.value)}),r.set("orderby",n),a.search=r.toString(),(i=a.toString())&&ajaxFilters.load_data(i)}}),v(document).on("click",".content-page .view-switcher a",function(e){var t,a;e.preventDefault(),x.in_progress||(e=v(this).attr("href"),t=v(this).attr("data-type"),a=v(this).parents(".filter-wrap").parent().find(".products-loop"),e&&(ajaxFilters.load_data(e),"grid"==t?a.removeClass("products-list").addClass("products-grid"):a.removeClass("products-grid").addClass("products-list")))}),v(document).on("change",".content-page .et-per-page-select",function(e){if(e.preventDefault(),!x.in_progress){let e=v(this),t=e.parents("form"),a=t.serializeArray(),r=window.location.href,i=(t.attr("action")&&(r=t.attr("action")),r=new URL(r),new URLSearchParams(r.search)),n,o="";v.each(a,function(e,t){"et_per_page"==t.name&&(o=t.value)}),i.delete("et_per_page"),i.set("et_per_page",o),r.search=i.toString(),(n=r.toString())&&ajaxFilters.load_data(n)}})}function n(a,r,i){var n=setInterval(function(){var e,t=parseFloat(a.get(0).style.left);r?100<=t+.3?(a.css("left","100%"),clearInterval(n)):a.css("left",t+.3+"%"):t-.3<=0?(a.css("left",0),clearInterval(n)):a.css("left",t-.3+"%"),i&&(t=v(".etheme-price-filter .ui-slider-range"),e=v(t).get(0).style.width,100<=parseFloat(e)+.3?t.css("width","100%"):t.css("width",parseFloat(e)+.3+"%"))},1)}etAjaxFiltersConfig.woocommerceSettings.ajax_pagination&&v(document).on("click",".content-page .woocommerce-pagination ul li a",function(e){e.preventDefault(),x.in_progress||("1"!==v(this).text()?v(".woocommerce-page").addClass("et_paged"):v(".woocommerce-page").removeClass("et_paged"),ajaxFilters.load_data(v(this).attr("href")))})},reinit_price_filter:function(){if((void 0===x.reinit_price||!x.reinit_price)&&(x.reinit_price=!0,v(".price_slider").length)){if("undefined"==typeof woocommerce_price_slider_params)return!1;v("input#min_price, input#max_price").hide(),v(".price_slider, .price_label").show();let e=v(".price_slider_amount #min_price"),t=v(".price_slider_amount #max_price"),a=e.data("min"),r=t.data("max"),i=v(".price_slider_amount").data("step")||1,n=parseInt(e.val()?e.val():a,10),o=parseInt(t.val()?t.val():r,10);v(".price_slider").slider({range:!0,animate:!0,min:a,max:r,step:i,values:[n,o],create:function(){e.val(n),t.val(o),v(document.body).trigger("price_slider_create",[n,o])},slide:function(e,t){v("input#min_price").val(t.values[0]),v("input#max_price").val(t.values[1]),v(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){v(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}},load_data:function(e,t){v(".et-loader.product-ajax").addClass("loading"),v("body").addClass("ajax-progress"),x.in_progress=!0,x.reinit_price=!1;let w=e;w=(w=(w=(w=w.replace("?et_ajax=true&","?")).replace("?et_ajax=true","?")).replace("et_ajax=true&","")).replace("et_ajax=true",""),e.includes("?")?e=e.replace("?","?et_ajax=true&"):e+="?et_ajax=true",v.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){v(".sidebar.et-mini-content.active").removeClass("active"),v(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown"),v("body").removeClass("off-canvas-sidebar-opened")},success:function(a){let e=v(a).find(".products-loop").html(),t=v(a).find(".sidebar").html(),r=v(a).find(".shop-filters").html(),i=v(a).find(".after-shop-loop").html(),n=v(a).find(".empty-category-block").html(),o=v(a).find(".view-switcher").html(),s=v(a).find(".products-per-page").html(),l=v(a).find(".term-description.et_second-description").html(),c=v(a).find(".term-description:not(.et_second-description)").html(),d=v(".term-description:not(.et_second-description)"),p=v(".category-description"),m=p.length,u=v(a).find(".page-heading").html(),h=v(a).find(".page-heading").attr("style");i=i&&(i=i.replace("?et_ajax=true","?")).replace("et_ajax=true","");var f,_=v(".content-page .products-loop"),g=v(".content-page .empty-category-block");if(v("body").hasClass("search-results")&&v(".products-title, .pages-result-slider, .posts-result-slider, .portfolios-result-slider").remove(),n?(_.html(""),g.length?(g.html(n),g.removeClass("hidden")):_.after('<div class="empty-category-block">'+n+"</div>")):(g.html("").addClass("hidden"),_.html(e)),o&&(g=_.attr("data-row-count"),f=v(a).find(".view-switcher").find(".switcher-active > a").attr("data-row-count"),v(".view-switcher").html(o),2<v(a).find(".view-switcher").find(".switch-grid").length)&&_.removeClass("row-count-"+g).addClass("row-count-"+f).attr("data-row-count",f),x.categories&&"inherit"!=etAjaxFiltersConfig.loop_prop_columns_category&&(g=_.attr("data-row-count"),_.removeClass("row-count-"+g).addClass("row-count-"+etAjaxFiltersConfig.loop_prop_columns_category).attr("data-row-count",etAjaxFiltersConfig.loop_prop_columns_category),x.categories=!1),s&&v(".products-per-page").html(s),u&&v(".page-heading").html(u),h?v(".page-heading").attr("style",h):v(".page-heading").attr("style",""),etAjaxFiltersConfig.ajax_categories){if(c){if(!d.length&&!m)switch(etAjaxFiltersConfig.product_page_banner_pos){case 4:v(".content-page").before('<div class="term-description"><div>');break;case 3:v(".content-page").prepend('<div class="term-description"><div>');break;case 1:v(".main-products-loop").prepend('<div class="term-description"><div>');break;default:v(".main-products-loop").append('<div class="term-description"><div>')}m?(p.html(c),ajaxFilters.reset_builders(etAjaxFiltersConfig.builder,p)):(d.html(c),ajaxFilters.reset_builders(etAjaxFiltersConfig.builder,d)),etAjaxFiltersConfig.builder.includes("elementor")&&((f=v(a).find("#elementor-frontend-inline-css").html())?v("#elementor-frontend-inline-css").html(f):v.each(v(a).find('[data-elementor-type="wp-post"]'),function(){var e=v(this).attr("data-elementor-id"),t=v(a).find("#elementor-post-"+e+"-css");v("#elementor-post-"+e+"-css").length||v("body").append(t)}))}else m?p.html():d.html("");l?(v(".term-description.et_second-description").length||v(".after-shop-loop").after('<div class=" term-description et_second-description"><div>'),v(".term-description.et_second-description").html(l),ajaxFilters.reset_builders(etAjaxFiltersConfig.builder,v(".term-description.et_second-description"))):v(".term-description.et_second-description").html("")}v(".fadeIn-slide").each(function(){v(this).addClass("fadedIn-slide"),setTimeout(function(){v(".fadeIn-slide").removeClass("fadedIn-slide").removeClass("fadeIn-slide")},700)}),v(".content-page .sidebar").html(t),ajaxFilters.reset_builders(etAjaxFiltersConfig.builder,v(".content-page .sidebar")),v(".content-page .shop-filters").html(r),ajaxFilters.reset_builders(etAjaxFiltersConfig.builder,v(".content-page .shop-filters")),jQuery().selectWoo&&v.each(v("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=v(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){return etAjaxFiltersConfig.notices.noMatchFound}}})}),v(".dropdown_product_cat").on("change",function(){var e,t;""!=v(this).val()?(t="",t=0<(e=etAjaxFiltersConfig.woocommerceSettings.home_url).indexOf("?")?e+"&product_cat="+v(this).val():e+"?product_cat="+v(this).val(),location.href=t):location.href=etAjaxFiltersConfig.woocommerceSettings.shop_url}),"undefined"==typeof woocommerce_price_slider_params&&(_=v(a).find(".et_woocommerce_price_slider_params").html(),v("body").prepend(_)),i?(v(".content-page .after-shop-loop").html(i),v("nav.woocommerce-pagination").find("a").each(function(){var e=v(this).attr("href"),t=new URL(e);new URLSearchParams(t.search).toString()||v(this).prop("href",e.replace("?",""))})):v(".content-page .after-shop-loop").html(""),etTheme.AjaxElement(),window.history.pushState("","",w),v(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){if(v(".et-loader.product-ajax").removeClass("loading"),void 0!==etTheme.reinitSwatches&&etTheme.reinitSwatches(),void 0!==etTheme.contentProdImages&&etTheme.contentProdImages(),void 0!==window.hoverSlider&&(window.hoverSlider.init({}),window.hoverSlider.prepareMarkup()),void 0!==etTheme.countdown&&etTheme.countdown(),v("body").removeClass("swc-default-done"),void 0!==etTheme.widgetsOpenCloseDefault&&etTheme.widgetsOpenCloseDefault(),ajaxFilters.reinit_price_filter(),etTheme.resizeVideo(),etTheme.swiperFunc(),etTheme.secondInitSwipers(),etTheme.customCss(),etTheme.customCssOne(),void 0!==etTheme.sidebarCanvas&&etTheme.sidebarCanvas(),void 0!==etTheme.stickySidebar&&v(document.body).trigger("sticky_kit:recalc"),v(document).trigger("yith_wcwl_reload_fragments"),v("body").removeClass("ajax-progress"),x.in_progress=!1,etTheme.global_image_lazy(),etAjaxFiltersConfig.scroll_top_after_ajax){let e=v(".content-page .main-products-loop > .products-loop").offset().top;v(".content-page .filter-wrap").length&&(e-=v(".content-page .filter-wrap").outerHeight()),e-=110,v("html, body").animate({scrollTop:e},1e3)}void 0!==etTheme.widgetsShowMore&&(v(".et_widget-show-more").remove(),etTheme.widgetsShowMore()),t&&t(),void 0===window.select&&!v("#select2-css").length||v(document).find(".dropdown_product_cat").select2()}})},reset_builders:function(e,t){e.includes("elementor")&&v(t).find(".elementor-element").each(function(){elementorFrontend.elementsHandler.runReadyTrigger(v(this))}),e.includes("wpb")&&(v(window).resize(),v(t).find(".wpb_animate_when_almost_visible").removeClass("wpb_animate_when_almost_visible"))}},v(document).ready(function(){ajaxFilters.init()})}(jQuery);